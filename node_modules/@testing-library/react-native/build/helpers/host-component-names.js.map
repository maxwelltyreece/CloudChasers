{"version":3,"file":"host-component-names.js","names":["React","_interopRequireWildcard","require","_reactNative","_config","_renderAct","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","userConfigErrorMessage","getHostComponentNames","hostComponentNames","getConfig","detectHostComponentNames","configureInternal","configureHostComponentNamesIfNeeded","configHostComponentNames","renderer","renderWithAct","createElement","View","Text","testID","TextInput","Switch","ScrollView","Modal","text","getByTestId","root","type","textInput","switch","scrollView","modal","error","errorMessage","message","Error","instance","nodes","findAll","node","props","length","isHostText","element","isHostTextInput","isHostScrollView","isHostModal"],"sources":["../../src/helpers/host-component-names.tsx"],"sourcesContent":["import * as React from 'react';\nimport { ReactTestInstance } from 'react-test-renderer';\nimport { Modal, ScrollView, Switch, Text, TextInput, View } from 'react-native';\nimport { configureInternal, getConfig, HostComponentNames } from '../config';\nimport { renderWithAct } from '../render-act';\nimport { HostTestInstance } from './component-tree';\n\nconst userConfigErrorMessage = `There seems to be an issue with your configuration that prevents React Native Testing Library from working correctly.\nPlease check if you are using compatible versions of React Native and React Native Testing Library.`;\n\nexport function getHostComponentNames(): HostComponentNames {\n  let hostComponentNames = getConfig().hostComponentNames;\n  if (!hostComponentNames) {\n    hostComponentNames = detectHostComponentNames();\n    configureInternal({ hostComponentNames });\n  }\n\n  return hostComponentNames;\n}\n\nexport function configureHostComponentNamesIfNeeded() {\n  const configHostComponentNames = getConfig().hostComponentNames;\n  if (configHostComponentNames) {\n    return;\n  }\n\n  const hostComponentNames = detectHostComponentNames();\n  configureInternal({ hostComponentNames });\n}\n\nfunction detectHostComponentNames(): HostComponentNames {\n  try {\n    const renderer = renderWithAct(\n      <View>\n        <Text testID=\"text\">Hello</Text>\n        <TextInput testID=\"textInput\" />\n        <Switch testID=\"switch\" />\n        <ScrollView testID=\"scrollView\" />\n        <Modal testID=\"modal\" />\n      </View>,\n    );\n\n    return {\n      text: getByTestId(renderer.root, 'text').type as string,\n      textInput: getByTestId(renderer.root, 'textInput').type as string,\n      switch: getByTestId(renderer.root, 'switch').type as string,\n      scrollView: getByTestId(renderer.root, 'scrollView').type as string,\n      modal: getByTestId(renderer.root, 'modal').type as string,\n    };\n  } catch (error) {\n    const errorMessage =\n      error && typeof error === 'object' && 'message' in error ? error.message : null;\n\n    throw new Error(\n      `Trying to detect host component names triggered the following error:\\n\\n${errorMessage}\\n\\n${userConfigErrorMessage}`,\n    );\n  }\n}\n\nfunction getByTestId(instance: ReactTestInstance, testID: string) {\n  const nodes = instance.findAll(\n    (node) => typeof node.type === 'string' && node.props.testID === testID,\n  );\n\n  if (nodes.length === 0) {\n    throw new Error(`Unable to find an element with testID: ${testID}`);\n  }\n\n  return nodes[0];\n}\n\n/**\n * Checks if the given element is a host Text.\n * @param element The element to check.\n */\nexport function isHostText(element?: ReactTestInstance | null): element is HostTestInstance {\n  return element?.type === getHostComponentNames().text;\n}\n\n/**\n * Checks if the given element is a host TextInput.\n * @param element The element to check.\n */\nexport function isHostTextInput(element?: ReactTestInstance | null): element is HostTestInstance {\n  return element?.type === getHostComponentNames().textInput;\n}\n\n/**\n * Checks if the given element is a host ScrollView.\n * @param element The element to check.\n */\nexport function isHostScrollView(element?: ReactTestInstance | null): element is HostTestInstance {\n  return element?.type === getHostComponentNames().scrollView;\n}\n\n/**\n * Checks if the given element is a host Modal.\n * @param element The element to check.\n */\nexport function isHostModal(element?: ReactTestInstance | null): element is HostTestInstance {\n  return element?.type === getHostComponentNames().modal;\n}\n"],"mappings":"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"}